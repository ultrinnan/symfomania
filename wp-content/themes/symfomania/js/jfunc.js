function stop_popout(){if(typeof newwindow!=="undefined"&&!newwindow.closed&&newwindow.jQuery("#jquery_jplayer").jPlayer("getData","diag.isPlaying")){newwindow.jQuery("#jquery_jplayer").jPlayer("clearFile")}}function play_button(a){if(a===""){return}if(mp3j_info[a].play_txt==="#USE_G#"){jQuery("#playpause_mp3j_"+a).removeClass("buttons_mp3jpause");jQuery("#playpause_mp3j_"+a).addClass("buttons_mp3j")}else{jQuery("#playpause_mp3j_"+a).empty();jQuery("#playpause_mp3j_"+a).append(mp3j_info[a].play_txt)}return}function pause_button(a){if(mp3j_info[a].play_txt==="#USE_G#"){jQuery("#playpause_mp3j_"+a).removeClass("buttons_mp3j");jQuery("#playpause_mp3j_"+a).addClass("buttons_mp3jpause")}else{jQuery("#playpause_mp3j_"+a).empty();jQuery("#playpause_mp3j_"+a).append(mp3j_info[a].pause_txt)}return}function clear_status(a){if(a===""){return}if(mp3j_info[a].status==="basic"){jQuery("#indi_mp3j_"+a+" span").replaceWith("")}if(mp3j_info[a].status==="full"){jQuery("#T-Time-MI_"+a).empty();jQuery("#statusMI_"+a).text("Ready");jQuery("#P-Time-MI_"+a).text("00:00")}}function clear_bars(a){if(a===""){return}jQuery("#load_mp3j_"+a).css("width","0");jQuery("#posbar_mp3j_"+a).slider("destroy")}function change_dload_link(a,b){if(!mp3j_info[a].download){return}var c=mp3j_info[a].list;jQuery("#download_mp3j_"+a).empty();jQuery("#download_mp3j_"+a).removeClass("whilelinks");jQuery("#download_mp3j_"+a).append('<a href="'+c[b].mp3+'">DOWNLOAD MP3</a>')}function change_titles(a,b){var c=mp3j_info[a].list;jQuery("#T_mp3j_"+a).empty();jQuery("#T_mp3j_"+a).append(c[b].name);jQuery("#C_mp3j_"+a).empty();if(c[b].artist!==""){jQuery("#C_mp3j_"+a).append(c[b].artist)}}function run_sound_complete(){if(mp3j_info[$tid].has_ul===1){var a=mp3j_info[$tid].list;if((mp3j_info[$tid].loop||mp3j_info[$tid].tr+1!==a.length)&&$link_playID===""){E_change_track($tid,"next")}else{change_list_classes($tid,0);change_titles($tid,0);change_dload_link($tid,0);mp3j_info[$tid].tr=0;play_button($tid);clear_bars($tid);clear_status($tid);$tid="";$link_playID="";jQuery("#jquery_jplayer").jPlayer("setFile",silence_mp3);jQuery("#jquery_jplayer").jPlayer("play");jQuery("#jquery_jplayer").jPlayer("clearFile");$state="";mp3j_init()}}else{play_button($tid);clear_bars($tid);clear_status($tid);var b=$tid;$tid="";jQuery("#jquery_jplayer").jPlayer("setFile",silence_mp3);jQuery("#jquery_jplayer").jPlayer("play");jQuery("#jquery_jplayer").jPlayer("clearFile");$state="";if(mp3j_info[b].loop){E_playpause_click(b)}else{mp3j_init()}}}function E_change_track(a,b){var c=mp3j_info[a].list;var d;var e=$tid;if(b==="next"){d=mp3j_info[a].tr+1<c.length?mp3j_info[a].tr+1:0}else if(b==="prev"){d=mp3j_info[a].tr-1<0?c.length-1:mp3j_info[a].tr-1}else{d=b}change_list_classes(a,d);change_titles(a,d);change_dload_link(a,d);play_button(e);if($tid!==a){jQuery("#jquery_jplayer").jPlayer("volume",100)}$tid=a;jQuery("#jquery_jplayer").jPlayer("setFile",c[d].mp3);pause_button(a);jQuery("#jquery_jplayer").jPlayer("play");jQuery("#jquery_jplayer").jPlayer("volume",mp3j_info[a].vol);mp3j_info[a].tr=d;clear_bars(e);clear_status(e);make_slider(a);$state="playing";$link_playID=""}function E_stop_doubleclick(a){change_list_classes(a,0);change_titles(a,0);change_dload_link(a,0);clear_status(a);mp3j_info[a].tr=0;if($tid===a){play_button(a);clear_bars(a);$tid="";jQuery("#jquery_jplayer").jPlayer("clearFile");$state="";$link_playID=""}}function E_stop_click(a){if($tid===a){play_button(a);clear_bars(a);clear_status(a);$tid="";jQuery("#jquery_jplayer").jPlayer("clearFile");if(mp3j_info[a].status==="full"){jQuery("#statusMI_"+a).text("Stopped")}$state="";$link_playID=""}}function E_playpause_click(a){if($tid===a&&$state==="playing"){jQuery("#jquery_jplayer").jPlayer("pause");play_button(a);$state="paused";$link_playID="";return}if($tid!==a){var b=$tid;$tid="";var c=mp3j_info[a].list;var d=mp3j_info[a].tr;jQuery("#jquery_jplayer").jPlayer("volume",100);jQuery("#jquery_jplayer").jPlayer("setFile",c[d].mp3);play_button(b);clear_bars(b);clear_status(b);make_slider(a)}pause_button(a);jQuery("#jquery_jplayer").jPlayer("play");jQuery("#jquery_jplayer").jPlayer("volume",mp3j_info[a].vol);$state="playing";$link_playID="";$tid=a}function i_write_lists_controls(a){var b=mp3j_info[a].list;var c;if(b.length>1){jQuery("#UL_mp3j_"+a).empty();for(c=0;c<b.length;c++){var d=c===b.length-1?"<li class='mp3j_LI_last'>":"<li>";d+="<a href='#' id='mp3j_A_"+a+"_"+c+"' class='clear smallfont' tabindex='1'><span class='trackname'>"+b[c].name+"</span><span class='artname'> "+b[c].artist+"</span></a></li>";jQuery("#UL_mp3j_"+a).append(d);if(c===0){jQuery("#mp3j_A_"+a+"_"+c).addClass("mp3j_A_current").parent().addClass("mp3j_A_current")}jQuery("#mp3j_A_"+a+"_"+c).data("player",{index:c,pid:a}).click(function(){if($tid!==a||$tid===a&&jQuery(this).data("player").index!==mp3j_info[a].tr){E_change_track(jQuery(this).data("player").pid,jQuery(this).data("player").index)}jQuery(this).blur();return false})}jQuery("#Next_mp3j_"+a).data("player",{pid:a}).click(function(){E_change_track(jQuery(this).data("player").pid,"next");jQuery(this).blur();return false});jQuery("#Prev_mp3j_"+a).data("player",{pid:a}).click(function(){E_change_track(jQuery(this).data("player").pid,"prev");jQuery(this).blur();return false});if(!mp3j_info[a].lstate){mp3j_info[a].lstate=true;MI_toggleplaylist("SHOW PLAYLIST",a)}}else{jQuery("#UL_mp3j_"+a).hide();jQuery("#playlist-toggle_"+a).hide()}jQuery("#T_mp3j_"+a).append(b[mp3j_info[a].tr].name);if(b[mp3j_info[a].tr].artist!==""){if(mp3j_info[a].type==="MI"){jQuery("#C_mp3j_"+a).append(b[mp3j_info[a].tr].artist)}else{jQuery("#T_mp3j_"+a).append(" - "+b[mp3j_info[a].tr].artist)}}}function i_write_stop_buttons(a){jQuery("#stop_mp3j_"+a).data("player",{pid:a}).click(function(){E_stop_click(jQuery(this).data("player").pid);jQuery(this).blur();return false});jQuery("#stop_mp3j_"+a).data("player",{pid:a}).dblclick(function(){E_stop_doubleclick(jQuery(this).data("player").pid);jQuery(this).blur();return false})}function i_write_download(a){if(mp3j_info[a].download===true){var b=mp3j_info[a].list;var c=mp3j_info[a].tr;jQuery("#download_mp3j_"+a).empty();jQuery("#download_mp3j_"+a).append('<a href="'+b[c].mp3+'">DOWNLOAD MP3</a>')}}function i_make_volume(a){jQuery("#vol_mp3j_"+a).slider({value:mp3j_info[a].vol,max:100,range:"min",animate:FoxAnimSlider,slide:function(b,c){mp3j_info[a].vol=c.value;if(a===$tid){jQuery("#jquery_jplayer").jPlayer("volume",c.value)}}})}function I_images(){if(document.images){pic1=new Image(4,4);pic1.src=foxpathtoimages+"t30w.png"}}function I_setup_players(){var a;for(a=0;a<mp3j_info.length;a++){i_make_volume(a);i_write_download(a);i_write_stop_buttons(a);if(mp3j_info[a].has_ul===0){jQuery("#playpause_wrap_mp3j_"+a).data("player",{id:a}).click(function(){E_playpause_click(jQuery(this).data("player").id);jQuery(this).blur();return false});jQuery("#playpause_wrap_mp3j_"+a).data("player",{id:a}).dblclick(function(){if($state!=="playing"){E_playpause_click(jQuery(this).data("player").id)}jQuery(this).blur();return false})}if(mp3j_info[a].has_ul===1){i_write_lists_controls(a);jQuery("#playpause_mp3j_"+a).data("player",{id:a}).click(function(){E_playpause_click(jQuery(this).data("player").id);jQuery(this).blur();return false});jQuery("#playpause_mp3j_"+a).data("player",{id:a}).dblclick(function(){if($state!=="playing"){E_playpause_click(jQuery(this).data("player").id)}jQuery(this).blur();return false})}if(mp3j_info[a].status==="full"){jQuery("#P-Time-MI_"+a).text("00:00");jQuery("#statusMI_"+a).append("Ready")}}}function I_unwrap(){if(fox_playf==="true"){var a;var b;if(typeof foxInline!=="undefined"){for(a=0;a<foxInline.length;a++){foxInline[a].mp3=foxInline[a].mp3}}if(typeof mp3j_info!=="undefined"){for(a=0;a<mp3j_info.length;a++){if(mp3j_info[a].has_ul===1){var c=mp3j_info[a].list;for(b=0;b<c.length;b++){c[b].mp3=c[b].mp3}}}}if(typeof mp3j_fields!=="undefined"){for(a=0;a<mp3j_fields.length;a++){var c=mp3j_fields[a].list;for(b=0;b<c.length;b++){c[b].mp3=c[b].mp3}}}}}var f_arr={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f_con:function(a){var b="";var c,d,e;var f,g,h,i;var j=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(j<a.length){f=this._keyStr.indexOf(a.charAt(j++));g=this._keyStr.indexOf(a.charAt(j++));h=this._keyStr.indexOf(a.charAt(j++));i=this._keyStr.indexOf(a.charAt(j++));c=f<<2|g>>4;d=(g&15)<<4|h>>2;e=(h&3)<<6|i;b=b+String.fromCharCode(c);if(h!==64){b=b+String.fromCharCode(d)}if(i!==64){b=b+String.fromCharCode(e)}}b=f_arr._utf8_f_con(b);return b},_utf8_f_con:function(a){var b="";var c=0;var d=0;var e=0;var f=0;while(c<a.length){f=a.charCodeAt(c);if(f<128){b+=String.fromCharCode(f);c++}else if(f>191&&f<224){e=a.charCodeAt(c+1);b+=String.fromCharCode((f&31)<<6|e&63);c+=2}else{e=a.charCodeAt(c+1);c3=a.charCodeAt(c+2);b+=String.fromCharCode((f&15)<<12|(e&63)<<6|c3&63);c+=3}}return b}}